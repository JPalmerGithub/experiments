#!/bin/bash
# Backs up ~minecraft to minecraft-bak. Should work without modification with a
# freshly set-up VM, but everything is parameterized below, anyway.

# Remote host to back up. This is the default IP of the VM we create.
host=192.168.33.10
# This is the key generated by vagrant. You'll need to double-escape this (if
# you have spaces) because of the way it's included in the command line below.
host_key="$HOME/.vagrant.d/insecure_private_key"
# Remote user to back up.
backup_user=minecraft
# Local path to save backup.
backup_dest=minecraft-bak

# TODO: Add parameters to allow only backing up minecraft server files (not
# mark2, etc).

export SSH_AUTH_SOCK= SSH_AGENT_PID=
rsync -av -e "ssh -l vagrant -i ${host_key}" "${host}":~${backup_user} "${backup_dest}"
